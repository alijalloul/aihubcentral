"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[576],{7576:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=n(4165),r=n(5861),s=n(9439),i=n(2791),c=n(6492),o=n(6193),u=n(8431),l=n(184),d=function(e){var t=e.startFunction,n=e.stopFunction,a=(0,i.useState)(!1),r=(0,s.Z)(a,2),c=r[0],o=r[1];return(0,l.jsxs)("div",{className:"microphone_container",children:[(0,l.jsx)("button",{id:"speech",className:"btn p-5",active:c.toString(),onClick:function(){c?(n(),o(!1)):(t(),o(!0))},children:(0,l.jsxs)("svg",{fill:"#000000",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,l.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[" ",(0,l.jsx)("path",{d:"M16 8c0 4.418-3.59 8-8 8-4.418 0-8-3.59-8-8h2c0 3.307 2.686 6 6 6 3.307 0 6-2.686 6-6h2zM4 3.996a4 4 0 0 1 8 0v4.008a4 4 0 0 1-8 0V3.996zM8 2a2 2 0 0 0-2 2v4a2 2 0 1 0 4 0V4a2 2 0 0 0-2-2zM6 5h4v2H6V5z",fillRule:"evenodd"})," "]})]})}),c&&(0,l.jsx)("div",{className:"pulse-ring"})]})},p=function(){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_URL||"http://localhost:5000",t=(0,i.useRef)(null),n=(0,i.useState)(null),p=(0,s.Z)(n,2),f=p[0],v=p[1],h=(0,i.useState)([]),x=(0,s.Z)(h,2),w=x[0],m=x[1],g=(0,i.useState)(null),j=(0,s.Z)(g,2),S=j[0],b=j[1],y=(0,i.useState)(null),R=(0,s.Z)(y,2),k=(R[0],R[1]),Z=(0,i.useState)(""),_=(0,s.Z)(Z,2),C=_[0],N=_[1],T=(0,i.useState)(""),E=(0,s.Z)(T,2),F=E[0],O=E[1],M=(0,i.useState)(""),D=(0,s.Z)(M,2);D[0],D[1];(0,i.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("MediaRecorder"in window)){e.next=13;break}return e.prev=1,e.next=4,Navigator.mediaDevices.getUserMedia({audio:!0});case 4:t=e.sent,v(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:e.next=14;break;case 13:console.log("The MediaRecorder API is not supported in your browser.");case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var L=function(){var e=new MediaRecorder(f,{type:"audio/wav"});t.current=e,t.current.start();var n=[];t.current.ondataavailable=function(e){n.push(e.data)},m(n)},V=function(){t.current.stop(),t.current.onstop=function(){var e=new Blob(w,{type:"audio/wav"}),t=URL.createObjectURL(e);O(e),b(t),m([]);var n=new File([t],"recorded_audio.wav",{type:"audio/wav",lastModified:(new Date).getTime()}),a=new DataTransfer;a.items.add(n),document.getElementById("audioFile").files=a.files,k(a.files[0]),console.log(n)}},P=function(){var t=(0,r.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{(n=new FileReader).onloadend=(0,r.Z)((0,a.Z)().mark((function t(){var r,s,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.result.split(",")[1],t.next=3,fetch("".concat(e,"/api/openai/transcriber"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audioBuffer:r,lang:"en"})});case 3:return s=t.sent,t.next=6,s.json();case 6:i=t.sent,N(i);case 8:case"end":return t.stop()}}),t)}))),n.readAsDataURL(F)}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,l.jsx)(c.X,{features:o.H,children:(0,l.jsxs)(u.m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"h-[calc(100vh-73px)] flex justify-center items-center",children:[(0,l.jsxs)("div",{className:"w-[40%] flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(d,{startFunction:L,stopFunction:V}),(0,l.jsx)("button",{onClick:L,className:"w-fit my-10 p-5 bg-gray-200 rounded-lg",children:"Start Recording"}),(0,l.jsx)("button",{onClick:V,className:"w-fit mb-10 p-5 bg-gray-200 rounded-lg",children:"Stop Recording"}),(0,l.jsx)("audio",{className:"mb-10",src:S&&S,controls:!0}),(0,l.jsx)("input",{id:"audioFile",type:"file",onChange:function(e){k(e.target.files[0])}})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"p-10 bg-yellow-500 rounded-xl",onClick:P,children:"Submit"})})]}),(0,l.jsx)("div",{className:"w-[40%] flex justify-center items-center",children:(0,l.jsx)("textarea",{value:C,readOnly:!0,className:"w-[60%] aspect-square resize-none shadow-lg shadow-black"})})]})})}}}]);
//# sourceMappingURL=576.1cc7734f.chunk.js.map