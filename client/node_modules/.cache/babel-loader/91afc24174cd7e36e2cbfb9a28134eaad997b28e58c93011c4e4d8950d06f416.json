{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst BASE_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:5000\";\nconst imagesSlice = createSlice({\n  name: \"images\",\n  initialState: {\n    imagesInfo: [],\n    pending: {},\n    error: false\n  },\n  reducers: {\n    startAPI: (state, action) => {\n      state.pending = {\n        ...state.pending,\n        [action.payload]: true\n      };\n      console.log(state.pending);\n    },\n    fetchSuccess: (state, action) => {\n      state.pending = {\n        ...state.pending,\n        fetchPosts: false\n      };\n      state.postsInfo = action.payload.data;\n      state.currentPage = action.payload.currentPage;\n      state.numberOfPages = action.payload.numberOfPages;\n    },\n    createSuccess: (state, action) => {\n      state.pending = {\n        ...state.pending,\n        createPost: false\n      };\n      state.postsInfo.push(action.payload);\n    },\n    errorAPI: (state, action) => {\n      state.pending = {\n        ...state.pending,\n        [action.payload]: null\n      };\n      state.error = true;\n    }\n  }\n});\nexport const fetchPosts = async (page, dispatch) => {\n  dispatch(postSlice.actions.startAPI(\"fetchPosts\"));\n  try {\n    const res = await fetch(`${BASE_URL}/posts?page=${page}`);\n    const data = await res.json();\n    dispatch(postSlice.actions.fetchSuccess(data));\n  } catch (error) {\n    dispatch(postSlice.actions.errorAPI());\n    console.log(\"error: \", error);\n  }\n};\nexport const createPost = async (postsInfo, navigate, dispatch) => {\n  dispatch(postSlice.actions.startAPI(\"createPost\"));\n  try {\n    const res = await fetch(`${BASE_URL}/posts`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"authorization\": `Bearer ${JSON.parse(localStorage.getItem(\"profile\")).token}`\n      },\n      body: JSON.stringify(postsInfo)\n    });\n    const data = await res.json();\n    navigate(data._id);\n    dispatch(postSlice.actions.createSuccess(data));\n  } catch (error) {\n    dispatch(postSlice.actions.errorAPI());\n    console.log(\"error: \", error);\n  }\n};\nexport default imagesSlice.reducer;","map":{"version":3,"names":["createSlice","BASE_URL","process","env","REACT_APP_SERVER_URL","imagesSlice","name","initialState","imagesInfo","pending","error","reducers","startAPI","state","action","payload","console","log","fetchSuccess","fetchPosts","postsInfo","data","currentPage","numberOfPages","createSuccess","createPost","push","errorAPI","page","dispatch","postSlice","actions","res","fetch","json","navigate","method","headers","JSON","parse","localStorage","getItem","token","body","stringify","_id","reducer"],"sources":["C:/Users/User/Desktop/aihubcentral/client/src/redux/Images.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst BASE_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:5000\";\n\nconst imagesSlice = createSlice({\n    name: \"images\",\n    initialState: {\n        imagesInfo: [],\n        pending: {},\n        error: false\n    },\n    reducers: {\n        startAPI: (state, action) => {\n            state.pending = {...state.pending, [action.payload]: true};\n            console.log(state.pending);\n        },\n        fetchSuccess: (state, action) => {\n            state.pending = {...state.pending, fetchPosts: false};\n            state.postsInfo = action.payload.data;\n            state.currentPage = action.payload.currentPage;\n            state.numberOfPages = action.payload.numberOfPages;\n        },\n        createSuccess: (state, action) => {\n            state.pending = {...state.pending, createPost: false};\n            state.postsInfo.push(action.payload);\n        },\n        errorAPI: (state, action) => {\n            state.pending = {...state.pending, [action.payload]: null};\n            state.error = true;\n        },\n    }\n});\n\nexport const fetchPosts = async (page, dispatch) => {\n    dispatch(postSlice.actions.startAPI(\"fetchPosts\"));\n\n    try {\n        \n        const res = await fetch(`${BASE_URL}/posts?page=${page}`);\n\n        const data = await res.json();\n\n        dispatch(postSlice.actions.fetchSuccess(data))\n    } catch (error) {\n        dispatch(postSlice.actions.errorAPI());\n        console.log(\"error: \", error);\n    }\n}\n\nexport const createPost = async (postsInfo, navigate, dispatch) => {\n    dispatch(postSlice.actions.startAPI(\"createPost\"));\n\n    try {\n        \n        const res = await fetch(`${BASE_URL}/posts`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"authorization\": `Bearer ${JSON.parse(localStorage.getItem(\"profile\")).token}`\n            },\n            body: JSON.stringify(postsInfo)\n        });\n\n        const data = await res.json();\n\n        navigate(data._id)\n        dispatch(postSlice.actions.createSuccess(data));\n    } catch (error) {\n        dispatch(postSlice.actions.errorAPI());\n        console.log(\"error: \", error);\n    }\n}\n\nexport default imagesSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}